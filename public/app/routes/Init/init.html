<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/app/routes/Init/init.css" />
  </head>
  <body>
    <header>
      <h2>Init</h2>
      <p>Essa é a página inicial</p>
    </header>
    <hr />
    <div>
      <h2>Iframe-route</h2>
      <ul>
        <li>
          <a
            data-page="../../../app/routes/Buttons/buttons.html"
            target="my-iframe"
            >botoes</a
          >
        </li>
        <li>
          <a
            data-page="../../../app/routes/Background/background.html"
            target="my-iframe"
            >fundos</a
          >
        </li>
      </ul>
      <br />
      <iframe src="" name="my-iframe" frameborder="0"></iframe>
    </div>
    <hr />
    <div class="tags">
      <img data-image="logo" width="100" height="100" />
      <my-icon data-icon="icon" width="100" height="100" />
    </div>

    <script>
      // const iframe = document.querySelector("iframe[name='my-iframe']");
      // iframe.onload = () => {
      //   const doc = iframe.contentDocument || iframe.contentWindow.document;
      //   // adiciona CSS
      //   const link = doc.createElement("link");
      //   link.rel = "stylesheet";
      //   link.href = "./pages/Botoes.css";
      //   doc.head.appendChild(link);

      //   // adiciona JS
      //   const script = doc.createElement("script");
      //   script.type = "module";
      //   script.src = "./pages/Botoes.js";
      //   doc.body.appendChild(script);
      // };

      document.querySelectorAll("a[target='my-iframe']").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault(); // evita erro 404
          const page = link.getAttribute("data-page");
          document.querySelector("iframe[name='my-iframe']").src = page;
          history.pushState({}, "", link.getAttribute("href")); // atualiza a URL para parecer rota
        });
      });
    </script>
  </body>
</html>
