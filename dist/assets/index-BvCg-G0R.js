(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();function Q(){const e=document.querySelectorAll("head meta, head link");if(!document.getElementById("global-meta")){const t=document.createElement("div");t.id="global-meta",t.style.display="none",document.body.appendChild(t),e.forEach(n=>{t.appendChild(n.cloneNode(!0))})}}function R(e=document){const t=document.getElementById("global-meta");if(!t)return;e.head.querySelectorAll("meta[data-global], link[data-global]").forEach(o=>o.remove()),t.querySelectorAll("meta, link").forEach(o=>{const a=o.cloneNode(!0);a.setAttribute("data-global","true"),e.head.appendChild(a)})}const L={},P=new Set,k=new Set;async function E(e){if(L[e])return L[e];const t=await fetch(e);if(!t.ok)throw new Error(`Erro ao carregar: ${e}`);const n=await t.text();return L[e]=n,n}async function Z(e){const t=[];return e.querySelectorAll('link[rel="stylesheet"]').forEach(n=>{const o=n.href;if(!o||P.has(o))return;P.add(o);const a=n.cloneNode(!0);document.head.appendChild(a),t.push(new Promise(r=>{a.onload=r,a.onerror=r}))}),Promise.all(t)}function ee(e){e.querySelectorAll("script").forEach(t=>{const n=t.src;if(n&&k.has(n)){t.remove();return}n&&k.add(n);const o=document.createElement("script");n?(o.src=n,o.type=t.type||"text/javascript",o.defer=!0):o.textContent=t.textContent,e.appendChild(o),t.remove()})}async function te(e,t,n){const o=document.createElement("div");o.innerHTML=t,await Z(o);const a=o.querySelector("#children")||o;let r=e.querySelector("#children-wrapper");r||(r=document.createElement("div"),r.id="children-wrapper",e.appendChild(r));const i=document.createDocumentFragment();if(i.append(...a.childNodes),r.replaceChildren(i),ee(r),typeof window.loadConstants=="function")try{window.loadConstants(r)}catch(d){console.warn("Erro em loadConstants:",d)}const c=o.querySelector("title")?.textContent;c&&(document.title=c);const s={};o.querySelectorAll("meta[name], meta[property]").forEach(d=>{const l=d.getAttribute("name")||d.getAttribute("property");l&&(s[l]=d.getAttribute("content"))}),document.dispatchEvent(new CustomEvent("spa:pageLoaded",{detail:{page:n,title:c,metas:s}}))}let b={scroll:{enabled:!1,mode:"original",custom:{ease:.2,stepMin:.8,stepMax:80}},fade:{enabled:!0,duration:250,useTranslate:!0,translateValue:"1px"}};function I(e,t=250){return new Promise(n=>{if(!e)return n();let o=!1;const a=setTimeout(()=>{o||(o=!0,i(),n())},t+50);function r(c){c.target!==e||o||(o=!0,i(),n())}function i(){clearTimeout(a),e.removeEventListener("transitionend",r)}e.addEventListener("transitionend",r)})}const v=new WeakMap;async function ne(e,t,n){const o=b.fade||{enabled:!1};if(!o.enabled||!e)return t();const a=o.duration,r=o.useTranslate?o.translateValue:null,i=v.get(e);i&&await i.catch(()=>{});const c=(async()=>{const s=e.style.transition;e.style.transition=`opacity ${a}ms ease, transform ${a}ms ease`,e.style.willChange="opacity, transform",e.style.opacity||(e.style.opacity=getComputedStyle(e).opacity||"1"),e.offsetWidth,e.style.opacity="0",r&&(e.style.transform=`translateY(${r})`),await I(e,a),await t(),e.offsetWidth,e.style.opacity="1",r&&(e.style.transform="translateY(0)"),await I(e,a),e.style.transition=s||""})();v.set(e,c);try{await c}finally{v.delete(e)}}let f={initialized:!1,cleanup:null};function q(e,t,n){return Math.max(t,Math.min(n,e))}function oe(e){if(f.initialized||!e?.enabled||("ontouchstart"in window||navigator.maxTouchPoints>0)&&e.mode!=="custom")return;const n={original:{ease:1,stepMin:.5,stepMax:1/0},smooth:{ease:.2,stepMin:.8,stepMax:80},heavy:{ease:.07,stepMin:.6,stepMax:40}},o=e.mode==="custom"?e.custom||e:n[e.mode]||n.smooth;let a=window.scrollY,r=a,i=!1;function c(){const l=a-r;if(Math.abs(l)>.5){let u=l*o.ease;u=q(u,-o.stepMax,o.stepMax),Math.abs(u)<o.stepMin&&(u=u>0?o.stepMin:-o.stepMin),r+=u,window.scrollTo(0,r),requestAnimationFrame(c)}else r=a,window.scrollTo(0,r),i=!1}function s(l){a=q(l,0,document.documentElement.scrollHeight-window.innerHeight),i||(i=!0,requestAnimationFrame(c))}function d(l){const u=l.target?.tagName;l.ctrlKey||["INPUT","TEXTAREA","SELECT"].includes(u)||l.target.isContentEditable||(l.preventDefault(),s(a+l.deltaY))}window.addEventListener("wheel",d,{passive:!1}),f.initialized=!0,f.cleanup=()=>{window.removeEventListener("wheel",d),f.initialized=!1,f.cleanup=null},console.log("Smooth scroll initialized:",o)}function ae(e){b={...b,...e},oe(b.scroll)}const w=document.getElementById("route");async function A(e,t="Erro"){const n=h.error?.[e];if(!n){console.error(`gateway.error.${e} não configurado`),w.innerHTML=`<h1>${t}</h1>`,document.title=t;return}try{const o=await E(n.endsWith(".html")?n:`${n}.html`);w.innerHTML=o,document.title=t}catch(o){console.error(`Falha ao carregar gateway ${e}:`,o),w.innerHTML=`<h1>${t}</h1>`,document.title=t}}async function $(){let e=document.getElementById("pageLoad");e||(e=document.createElement("div"),e.id="pageLoad",Object.assign(e.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,1)",zIndex:"9999",color:"#fff",fontFamily:"sans-serif",fontSize:"1.2rem",textAlign:"center"}),document.body.appendChild(e)),e.style.display="flex";try{const t=await E(h.load.pageLoad.endsWith(".html")?h.load.pageLoad:`${h.load.pageLoad}.html`);e.innerHTML=t}catch(t){console.error("Falha ao carregar pageLoad:",t),e.innerHTML="Carregando…"}}function g(){const e=document.getElementById("pageLoad");e&&(e.style.display="none",e.innerHTML="")}async function D(){history.pushState({},"","/404"),await A("error404","404 - Página não encontrada")}async function T(){history.pushState({},"","/500"),await A("error500","500 - Erro interno")}async function N(){history.pushState({},"","/offline"),await A("errorOffline","Sem conexão")}async function x(e){const t=h.flows.find(n=>n.path.test(e));if(t){await $();try{location.pathname!==e&&history.pushState({},"",e);const n=await E(t.page.endsWith(".html")?t.page:`${t.page}.html`);w.innerHTML=n,document.title=t.title||"Flow Page"}catch(n){console.error("Falha ao carregar flow:",n),w.innerHTML="<h1>Erro ao carregar flow</h1>",document.title="Erro Flow"}finally{g()}}}window.addEventListener("popstate",()=>{const e=location.pathname;h.flows.find(n=>n.path.test(e))?x(e):y(e)});const re=document.getElementById("route"),O=new Set;Q();function J(e){e?.meta&&updateMeta(e.meta)}async function z(e,t){if(!O.has(e))try{const n=await E(e.endsWith(".html")?e:`${e}.html`);re.innerHTML=n,R(),J(t),O.add(e)}catch{T()}}async function F(e){const t=document.querySelector("#children-wrapper");if(!t)return;const n=V.find(o=>o.path.test(e));if(!n){D();return}try{const o=await E(n.page.endsWith(".html")?n.page:`${n.page}.html`);await ne(t,async()=>{await te(t,o,n.page),R(),J(n)})}catch{navigator.onLine?T():N()}}async function y(e){e.startsWith("/")||(e=`/${e}`);const t=Date.now(),n=h.load.loadTime;if(h.flows.some(r=>r.path.test(e))){x(e);return}const o=S.find(r=>r.path.test(e)),a=V.find(r=>r.path.test(e));try{if(o){if(await $(),await z(o.page,o.meta),p.useChildren){const c=e.split("/").filter(Boolean)[1]||p.defaultChild;await F(c)}const r=Date.now()-t;r<n&&await new Promise(i=>setTimeout(i,n-r)),g();return}if(a){const r=S.find(i=>i.path.test(`/${p.dirsChild}`))||S[1];await z(r.page,r.meta),await F(e);return}g(),D()}catch{g(),navigator.onLine?T():N()}}function ie(e){const t=e.target.closest("a[page]");if(!t)return;const n=t.getAttribute("href");if(!n||n.startsWith("http")||n.startsWith("mailto:")||t.target==="_blank")return;e.preventDefault();const o=n.startsWith("/")?n:`/${n}`;if(h.flows.some(a=>a.path.test(o))){x(o);return}location.pathname!==o&&window.history.pushState({},"",o),y(o)}document.addEventListener("DOMContentLoaded",async()=>{document.body.addEventListener("click",ie),window.addEventListener("popstate",()=>y(location.pathname)),await $(),await y(location.pathname),g()});function se(e={}){const t={enabled:e.enabled??!0,up:e.up??null,down:e.down??null,left:e.left??null,right:e.right??null,threshold:e.threshold??50,onSwipe:e.onSwipe??null};if(!t.enabled)return;let n=0,o=0;function a(i){const c=i.touches[0];n=c.clientX,o=c.clientY}function r(i){const c=i.changedTouches[0],s=c.clientX-n,d=c.clientY-o;let l=null;if(Math.abs(s)>Math.abs(d)&&Math.abs(s)>t.threshold?l=s>0?"right":"left":Math.abs(d)>Math.abs(s)&&Math.abs(d)>t.threshold&&(l=d>0?"down":"up"),!!l){if(typeof t.onSwipe=="function"){t.onSwipe(l);return}switch(l){case"up":t.up&&(location.hash=t.up);break;case"down":t.down&&(location.hash=t.down);break;case"left":t.left&&(location.hash=t.left);break;case"right":t.right&&(location.hash=t.right);break}}}return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchend",r,{passive:!0}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchend",r)}}const ce=["A listener indicated an asynchronous response","chrome-extension"];function Y(e){const t=e.message||e.reason||"";ce.some(n=>t.includes(n))&&(console.warn("Ignorado:",t),e.preventDefault?.())}window.addEventListener("error",Y);window.addEventListener("unhandledrejection",Y);const C={css:new Set,js:new Set};function le(e){return C.css.has(e)?Promise.resolve():new Promise(t=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onload=t,n.onerror=t,document.head.appendChild(n),C.css.add(e)})}function M(e,t=!0){return C.js.has(e)?Promise.resolve():new Promise((n,o)=>{const a=document.createElement("script");a.src=e,a.defer=!0,t&&(a.type="module"),a.onload=()=>n(),a.onerror=()=>o(new Error(`Falha ao carregar ${e}`)),document.body.appendChild(a),C.js.add(e)})}const _=new IntersectionObserver(e=>{e.forEach(async t=>{if(!t.isIntersecting)return;const n=t.target;for(const o of Array.from(n.classList).filter(a=>a.includes("-"))){const[a,r]=o.split("-"),i=`${p.dirs.models}/${a}/${r}/styles.css`,c=`${p.dirs.models}/${a}/${r}/script.js`;try{await le(i),await M(c);const s=`${a}-${r}`;window.Components?.[s]?.init?.()}catch(s){console.warn(s)}}n.dataset.lazy&&import(n.dataset.lazy).then(o=>o.init?.(n)).catch(()=>{}),n.querySelectorAll("script[type='module'][src$='script.js']").forEach(o=>{M(o.src).catch(()=>{})}),_.unobserve(n)})},{threshold:.1});function de(){document.querySelectorAll("[class*='-'], [data-lazy]").forEach(e=>_.observe(e))}async function ue(){document.querySelectorAll("[data-lazy]").forEach(e=>{import(e.dataset.lazy).then(t=>t.init?.(e)).catch(()=>{})}),document.querySelectorAll("script[type='module'][src$='script.js']").forEach(e=>M(e.src).catch(()=>{}))}document.addEventListener("DOMContentLoaded",()=>{de()});function pe(e=document){e.querySelectorAll("[data-image]").forEach(n=>{const o=n.dataset.image,a=Me[o];if(!a)return console.warn(`⚠️ data-image="${o}" não encontrado no imageMap`);const r=a.dark&&window.matchMedia("(prefers-color-scheme: dark)").matches;let i=a.src;if(a.set){const c=window.innerWidth;(!a.set.minWidth||c>=a.set.minWidth)&&(!a.set.maxWidth||c<=a.set.maxWidth)?i=r&&a.set.dark?a.set.dark:a.set.src:r&&a.dark&&(i=a.dark)}else r&&a.dark&&(i=a.dark);n.src=i,n.alt=a.alt||o,n.title=a.title||o,n.decoding="async",n.loading="lazy",n.fetchPriority=a.fetchpriority||"low"})}function he(e=document){e.querySelectorAll("[data-link]").forEach(n=>{const o=n.dataset.link,a=Ae[o];if(!a)return console.warn(`⚠️ data-link="${o}" não encontrado no linkMap`);n.href=a.href,n.title=a.title||o,n.rel="noopener noreferrer",a.type&&(n.type=a.type),a["aria-label"]&&n.setAttribute("aria-label",a["aria-label"]),a.download&&n.setAttribute("download",a.download===!0?"":a.download),a.target&&(n.target=a.target)})}class fe extends HTMLElement{connectedCallback(){this.render()}render(){const t=this.dataset.icon,n=$e[t];if(!n||this.querySelector("img"))return;const o=document.createElement("img");o.src=n.src||n,o.alt=this.getAttribute("alt")||t,o.title=this.getAttribute("title")||t,o.decoding="async",o.loading="lazy",o.setAttribute("role","img"),this.hasAttribute("width")&&(o.width=this.getAttribute("width")),this.hasAttribute("height")&&(o.height=this.getAttribute("height")),this.appendChild(o)}}customElements.get("my-icon")||customElements.define("my-icon",fe);function me(e=document){e.querySelectorAll("my-icon[data-icon]").forEach(t=>{typeof t.render=="function"&&t.render()})}function G(e=document){pe(e),he(e),me(e)}function we(e=document.getElementById("route")){if(!e)return;new MutationObserver(()=>G(e)).observe(e,{childList:!0,subtree:!0})}function ge(){G(),we()}const X={data:{},get(e,t=null){return this.data[e]!==void 0?this.data[e]:t},set(e,t){this.data[e]=t},remove(e){delete this.data[e]},clear(){this.data={}}};function ye(){try{localStorage.setItem("spaCache",JSON.stringify(X.data))}catch(e){console.warn("saveCache falhou:",e)}}function Ee(){try{const e=localStorage.getItem("spaCache");e&&(X.data=JSON.parse(e))}catch(e){console.warn("loadCache falhou:",e)}}Ee();window.addEventListener("beforeunload",ye);const H=new Set,W=new Set,B=new Map;function be(e,t="html"){return`${window.location.origin}/${p.dirs.layouts}/${e}.${t}`}function Ce(e,t={}){let n=e;return Object.keys(t).forEach(o=>{const a=String(t[o]).replace(/[&<>"]/g,r=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"})[r]);n=n.replace(new RegExp(`{{\\s*${o}\\s*}}`,"g"),a)}),n}async function Le(e,t,n={}){if(!e||!t)return;let o=B.get(e);if(!o)try{const s=await fetch(be(e,"html"));if(!s.ok)throw new Error(`Componente ${e} não encontrado`);o=await s.text(),B.set(e,o)}catch(s){t.innerHTML=`<p style="color:red">Erro ao carregar ${e}</p>`,console.error(s);return}const a=Ce(o,n),r=document.createElement("div");r.innerHTML=a;const i=Array.from(r.querySelectorAll('link[rel="stylesheet"]')).map(s=>!s.href||H.has(s.href)?Promise.resolve():new Promise(d=>{const l=s.cloneNode(!0);l.onload=l.onerror=d,document.head.appendChild(l),H.add(s.href)}));await Promise.all(i);const c=Array.from(r.querySelectorAll("script"));c.forEach(s=>s.remove()),t.innerHTML=r.innerHTML,c.forEach((s,d)=>{const l=`${e}-${s.src||"inline-"+d}`;if(W.has(l))return;const u=document.createElement("script");s.src?(u.src=s.src,u.defer=!0):u.textContent=s.textContent,document.body.appendChild(u),W.add(l)}),typeof window.setupInstallButton=="function"&&window.setupInstallButton()}function U(e=document){e.querySelectorAll("[data-component]").forEach(t=>{if(t.dataset.initialized==="true")return;const n=t.dataset.component,o=t.dataset.props?JSON.parse(t.dataset.props):{};Le(n,t,o),t.dataset.initialized="true"})}document.addEventListener("DOMContentLoaded",()=>U());document.addEventListener("spa:pageLoaded",e=>U(e.target));window.loadConstants=async function(e=document){e=e||document;const t=window._loadedCss||new Set,n=window._loadedJs||new Set;window._loadedCss=t,window._loadedJs=n;const o=new Set;e.querySelectorAll("[class*='-']").forEach(i=>i.classList.forEach(c=>{c.includes("-")&&o.add(c)}));const a=[...o];a.forEach(i=>{const[c,s]=i.split("-");if(!c||!s)return;const d=`${p.dirs.models}/${c}/${s}/styles.css`;if(!t.has(d)){const l=document.createElement("link");l.rel="stylesheet",l.href=d,document.head.appendChild(l),t.add(d)}});const r=a.map(i=>{const[c,s]=i.split("-");if(!c||!s)return Promise.resolve();const d=`${p.dirs.models}/${c}/${s}/script.js`;return n.has(d)?(window.Components?.[i]?.init&&window.Components[i].init(),Promise.resolve()):new Promise(l=>{const u=document.createElement("script");u.src=d,u.defer=!0,u.onload=()=>{if(window.Components?.[i]?.init)try{window.Components[i].init()}catch(K){console.warn(`[Framework] Erro init componente ${i}:`,K)}l()},u.onerror=()=>{console.warn(`[Framework] Falha ao carregar script: ${d}`),l()},document.body.appendChild(u),n.add(d)})});await Promise.all(r)};let m=null;function ve(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function Se(e="btn-install"){const t=document.getElementById(e);if(!t)return;const n=/iphone|ipad|ipod/i.test(navigator.userAgent);if(ve()){t.textContent="Atualizar App",t.style.display="inline-block",t.onclick=()=>location.reload();return}if(n){t.textContent="Adicionar à Tela Inicial",t.style.display="inline-block",t.onclick=()=>alert("Toque no botão Compartilhar e depois 'Adicionar à Tela Inicial'.");return}window.addEventListener("beforeinstallprompt",a=>{a.preventDefault(),m=a,t.textContent="Instalar App",t.style.display="inline-block"}),t.addEventListener("click",async()=>{m?(m.prompt(),(await m.userChoice).outcome==="accepted"?(console.log("Usuário aceitou instalar o app!"),t.textContent="Atualizar App",t.onclick=()=>location.reload()):console.log("Usuário cancelou instalação."),m=null):alert("Seu navegador não suporta instalação automática. Crie um atalho manualmente.")}),window.addEventListener("appinstalled",()=>{console.log("App instalado!"),t.textContent="Atualizar App",t.onclick=()=>location.reload(),t.style.display="inline-block"})}window.setupInstallButton=Se;ge();const p={dirs:{layouts:"/components/layouts",models:"/components/models"},useChildren:!0,persistentChild:null,defaultChild:"/Init",dirsChild:"/app/Home/home"},S=[{path:/^\/$/,page:"./app/site/site"},{path:/^\/Home$/,page:p.dirsChild}],V=[{path:/^\/Init$/,page:"/app/routes/Init/init"},{path:/^\/Botoes$/,page:"/app/routes/Buttons/buttons"},{path:/^\/Fundos$/,page:"/app/routes/Background/background"},{path:/^\/Anotacoes$/,page:"/app/routes/Note/note"},{path:/^\/Sobre$/,page:"/app/routes/About/about"},{path:/^\/Contato$/,page:"/app/routes/Contact/contact"}],Me={logo:{src:"/constant/image/Frame.png",alt:"imagem da logo",title:"Lucas Bucalon",fetchpriority:"high",dark:"/constant/image/Frame.png",set:{src:"/constant/image/Frame.png",Dark:"/constant/image/Frame.png",maxWidth:768}}},Ae={curriculo:{href:"/constant/pdf/Curriculo.pdf",download:!1,type:"application/pdf",title:"Currículo","aria-label":"Currículo em PDF"}},$e={icon:{src:"/constant/svg/icon.svg",alt:"icon",title:"icon"}},j={scroll:{enabled:!0,mode:"smooth",custom:{ease:.4,stepMin:1,stepMax:60}},fade:{enabled:!0,duration:250,useTranslate:!1,translateValue:"1px"}},h={error:{error404:"./app/pages/error/404",error500:"./app/pages/error/500",errorOffline:"./app/pages/error/offline"},load:{pageLoad:"/app/pages/loads/pageLoad",loading:"/app/pages/loads/loading",loadTime:500},flows:[{path:/^\/Politicas$/,page:"/app/pages/flows/politicas"},{path:/^\/Informacoes$/,page:"/app/pages/flows/informacoes"}]};document.addEventListener("DOMContentLoaded",()=>{ae(j),y(location.pathname||"/"),se({enabled:!1,left:"/Botoes",right:"/Fundos",up:"/Sobre",down:"/Contato",threshold:40}),document.addEventListener("spa:pageLoaded",()=>{ue()}),console.log("Main.js initialized: animated config",j)});
